<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farm2Home - Fresh Produce Marketplace</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;family=Sora:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      height: 100%;
      overflow-x: hidden;
      color: #1a1a1a;
      font-size: 14px;
      line-height: 1.6;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 152, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(33, 150, 243, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    * {
      box-sizing: border-box;
    }

    /* Header */
    .header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }

    .header-top {
      background: #2d5016;
      padding: 8px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: rgba(255,255,255,0.9);
    }

    .header-top-left {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .header-top-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .header-main {
      padding: 14px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .logo:hover {
      opacity: 0.8;
    }

    .logo-icon {
      width: 38px;
      height: 38px;
      background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 800;
      color: white;
      font-family: 'Sora', sans-serif;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-title {
      font-size: 20px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
      letter-spacing: -0.5px;
    }

    .logo-subtitle {
      font-size: 10px;
      color: #666;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    /* Search */
    .search-container {
      flex: 1;
      max-width: 500px;
      position: relative;
    }

    .search-box {
      width: 100%;
      padding: 10px 40px 10px 16px;
      border: 1px solid #e5e5e5;
      border-radius: 8px;
      font-size: 13px;
      background: #fafafa;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .search-box:focus {
      outline: none;
      border-color: #4caf50;
      background: white;
    }

    .search-btn {
      position: absolute;
      right: 4px;
      top: 50%;
      transform: translateY(-50%);
      background: #4caf50;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      transition: all 0.2s;
    }

    .search-btn:hover {
      background: #388e3c;
    }

    .header-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .header-btn {
      background: white;
      color: #333;
      border: 1px solid #e5e5e5;
      padding: 9px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .header-btn:hover {
      border-color: #4caf50;
      color: #4caf50;
    }

    .admin-btn {
      background: #4caf50;
      color: white;
      border: none;
    }

    .admin-btn:hover {
      background: #388e3c;
      color: white;
    }

    .cart-btn {
      position: relative;
    }

    .cart-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: #ff5722;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 700;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
      padding: 80px 40px;
      text-align: center;
      color: white;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -10%;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
      border-radius: 50%;
      animation: float 20s ease-in-out infinite;
    }
    
    .hero::after {
      content: '';
      position: absolute;
      bottom: -30%;
      left: -5%;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      border-radius: 50%;
      animation: float 15s ease-in-out infinite reverse;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(30px, -30px) scale(1.1); }
    }

    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    .hero-badge {
      display: inline-block;
      background: rgba(255,255,255,0.2);
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 20px;
    }

    .hero-title {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 16px;
      line-height: 1.2;
      font-family: 'Sora', sans-serif;
    }

    .hero-subtitle {
      font-size: 16px;
      opacity: 0.95;
      margin-bottom: 30px;
      font-weight: 400;
    }

    .hero-cta {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .hero-btn {
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .hero-btn-primary {
      background: white;
      color: #2d5016;
    }

    .hero-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .hero-btn-secondary {
      background: rgba(255,255,255,0.15);
      color: white;
      border: 1px solid white;
    }

    .hero-btn-secondary:hover {
      background: rgba(255,255,255,0.25);
    }

    .hero-features {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 40px;
    }

    .hero-feature {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 500;
    }

    .hero-feature-icon {
      width: 42px;
      height: 42px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    /* Stats Banner */
    .stats-banner {
      background: white;
      padding: 30px 40px;
      border-bottom: 1px solid #e5e5e5;
    }

    .stats-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 30px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 32px;
      font-weight: 700;
      color: #4caf50;
      margin-bottom: 6px;
      font-family: 'Sora', sans-serif;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    /* Main Content */
    .main-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 40px;
      position: relative;
      z-index: 1;
    }

    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    /* Section Styles */
    .section {
      margin-bottom: 50px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .section-title {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
    }

    /* Category Filter */
    .category-filter {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .category-chip {
      padding: 10px 24px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(76, 175, 80, 0.2);
      border-radius: 25px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      color: #333;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Inter', sans-serif;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .category-chip:hover {
      border-color: #4caf50;
      color: #4caf50;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
    }

    .category-chip.active {
      background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
      color: white;
      border-color: #4caf50;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
    }

    /* Product Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 30px;
    }

    .product-card {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08), 0 0 0 1px rgba(255,255,255,0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255,255,255,0.8);
      cursor: pointer;
      position: relative;
    }
    
    .product-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #4caf50, #8bc34a, #cddc39);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .product-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(76, 175, 80, 0.2), 0 0 0 1px rgba(76, 175, 80, 0.1);
    }
    
    .product-card:hover::before {
      opacity: 1;
    }

    .product-image-container {
      position: relative;
      width: 100%;
      height: 200px;
      overflow: hidden;
      background: #f5f5f5;
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    .product-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #4caf50;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .verified-badge {
      position: absolute;
      top: 12px;
      left: 12px;
      background: white;
      color: #4caf50;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .product-info {
      padding: 18px;
    }

    .product-category {
      color: #4caf50;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .product-name {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 8px;
      line-height: 1.3;
      font-family: 'Sora', sans-serif;
    }

    .product-description {
      color: #666;
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 12px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .farmer-info {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 12px;
      font-size: 12px;
      color: #333;
    }

    .farmer-name {
      font-weight: 600;
      margin-bottom: 4px;
      color: #1a1a1a;
    }

    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 12px;
      border-top: 1px solid #f0f0f0;
      margin-bottom: 12px;
    }

    .product-price {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
    }

    .product-unit {
      font-size: 12px;
      color: #666;
      font-weight: 500;
    }

    .product-stock {
      background: #fff3e0;
      color: #f57c00;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    /* Buttons */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .btn-primary {
      background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #388e3c 0%, #4caf50 100%);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%);
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
    }

    .btn-secondary:hover {
      background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
      box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4);
      transform: translateY(-2px);
    }

    .btn-outline {
      background: transparent;
      color: #4caf50;
      border: 1px solid #4caf50;
    }

    .btn-outline:hover {
      background: #4caf50;
      color: white;
    }

    .btn-danger {
      background: #f44336;
      color: white;
    }

    .btn-danger:hover {
      background: #d32f2f;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .product-actions {
      display: flex;
      gap: 8px;
    }

    /* Auth Pages */
    .auth-container {
      min-height: 70%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }

    .auth-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 50px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.5);
      max-width: 480px;
      width: 100%;
      border: 1px solid rgba(255,255,255,0.8);
      position: relative;
      overflow: hidden;
    }
    
    .auth-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, #4caf50, #8bc34a, #cddc39, #ff9800);
    }

    .auth-title {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 10px;
      font-family: 'Sora', sans-serif;
    }

    .auth-subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
      line-height: 1.5;
    }

    .form-group {
      margin-bottom: 18px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #1a1a1a;
      font-size: 13px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 13px 16px;
      border: 2px solid rgba(229, 229, 229, 0.5);
      border-radius: 10px;
      font-size: 14px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Inter', sans-serif;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(5px);
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: #4caf50;
      background: white;
      box-shadow: 0 0 0 4px rgba(76,175,80,0.1), 0 4px 12px rgba(76,175,80,0.15);
      transform: translateY(-2px);
    }

    .form-textarea {
      resize: vertical;
      min-height: 100px;
    }

    /* Cart Styles */
    .cart-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 35px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.5);
      border: 1px solid rgba(255,255,255,0.8);
    }

    .cart-item {
      display: flex;
      gap: 20px;
      padding: 20px;
      border-bottom: 1px solid #f0f0f0;
      align-items: center;
      transition: background 0.2s;
    }

    .cart-item:hover {
      background: #fafafa;
    }

    .cart-item-image {
      width: 90px;
      height: 90px;
      border-radius: 8px;
      object-fit: cover;
      background: #f5f5f5;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-name {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 6px;
      font-family: 'Sora', sans-serif;
    }

    .cart-item-details {
      color: #666;
      font-size: 12px;
      line-height: 1.6;
    }

    .cart-item-price {
      font-size: 18px;
      font-weight: 700;
      color: #1a1a1a;
      margin-right: 16px;
      font-family: 'Sora', sans-serif;
    }

    .cart-summary {
      background: #f8f9fa;
      padding: 24px;
      border-radius: 8px;
      margin-top: 24px;
    }

    .cart-total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .cart-total-row.final {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 2px solid #e5e5e5;
    }

    .cart-total-label {
      font-weight: 600;
      color: #333;
    }

    .cart-total-amount {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
    }

    /* Checkout & Payment */
    .checkout-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-top: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border: 1px solid #f0f0f0;
    }

    .checkout-title {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid #f0f0f0;
      font-family: 'Sora', sans-serif;
    }

    .payment-methods {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .payment-method {
      padding: 24px 16px;
      border: 2px solid #e5e5e5;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      background: white;
    }

    .payment-method:hover {
      border-color: #4caf50;
    }

    .payment-method.selected {
      border-color: #4caf50;
      background: #f1f8f4;
    }

    .payment-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .payment-label {
      font-weight: 600;
      color: #1a1a1a;
      font-size: 13px;
    }

    .qr-display {
      text-align: center;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-top: 24px;
    }

    .qr-image {
      max-width: 250px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      background: white;
      padding: 16px;
    }

    /* Dashboard Stats */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.5);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.8);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #4caf50, #8bc34a);
      transform: scaleX(0);
      transition: transform 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(76, 175, 80, 0.15), 0 0 0 1px rgba(76, 175, 80, 0.1);
    }
    
    .stat-card:hover::before {
      transform: scaleX(1);
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #4caf50 0%, #66bb6a 50%, #8bc34a 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 28px;
      color: white;
      box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
      transition: transform 0.3s;
    }
    
    .stat-card:hover .stat-icon {
      transform: scale(1.1) rotate(5deg);
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 8px;
      font-family: 'Sora', sans-serif;
    }

    .stat-label {
      color: #666;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Admin Cards */
    .admin-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 35px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.5);
      margin-bottom: 30px;
      border: 1px solid rgba(255,255,255,0.8);
      transition: all 0.3s;
    }
    
    .admin-card:hover {
      box-shadow: 0 15px 50px rgba(0,0,0,0.15), 0 0 0 1px rgba(76, 175, 80, 0.2);
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
      flex-wrap: wrap;
      gap: 16px;
    }

    .admin-title {
      font-size: 24px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
    }

    .product-list-item {
      background: #fafafa;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 16px;
      border: 1px solid #e5e5e5;
      transition: all 0.2s;
    }

    .product-list-item:hover {
      border-color: #4caf50;
    }

    .product-list-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 16px;
    }

    .product-list-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 8px;
      font-family: 'Sora', sans-serif;
    }

    .product-list-details {
      color: #666;
      font-size: 12px;
      line-height: 1.8;
    }

    .status-badge {
      padding: 6px 14px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-pending {
      background: #fff3e0;
      color: #f57c00;
    }

    .status-approved {
      background: #e8f5e9;
      color: #388e3c;
    }

    .status-rejected {
      background: #ffebee;
      color: #d32f2f;
    }

    .admin-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    /* Image Upload */
    .image-upload-container {
      margin-bottom: 20px;
    }

    .image-preview {
      width: 100%;
      max-width: 300px;
      height: 200px;
      border-radius: 8px;
      object-fit: cover;
      margin-top: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .file-input-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
      width: 100%;
    }

    .file-input-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 18px;
      background: #f8f9fa;
      border: 2px dashed #e5e5e5;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 600;
      color: #333;
      font-size: 13px;
    }

    .file-input-label:hover {
      background: #e9ecef;
      border-color: #4caf50;
    }

    .file-input {
      position: absolute;
      font-size: 100px;
      opacity: 0;
      right: 0;
      top: 0;
      cursor: pointer;
    }

    /* About Section */
    .about-section {
      background: linear-gradient(135deg, #2d5016 0%, #1a3010 100%);
      color: white;
      padding: 60px 40px;
      border-radius: 12px;
      margin-top: 60px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .about-content-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 50px;
      align-items: center;
    }

    .about-text {
      padding-right: 30px;
    }

    .about-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 20px;
      font-family: 'Sora', sans-serif;
    }

    .about-description {
      font-size: 15px;
      line-height: 1.7;
      opacity: 0.9;
      margin-bottom: 30px;
    }

    .contact-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
    }

    .contact-item {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.2s;
    }

    .contact-item:hover {
      background: rgba(255,255,255,0.15);
    }

    .contact-icon {
      font-size: 24px;
      margin-bottom: 12px;
    }

    .contact-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      opacity: 0.8;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .contact-value {
      font-size: 14px;
      font-weight: 600;
    }

    /* Success Page */
    .order-success {
      text-align: center;
      padding: 60px 30px;
    }

    .success-icon {
      width: 90px;
      height: 90px;
      background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: 48px;
      color: white;
    }

    .success-title {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 16px;
      font-family: 'Sora', sans-serif;
    }

    .success-message {
      font-size: 15px;
      color: #666;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #1a1a1a;
      color: white;
      padding: 14px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      display: none;
      z-index: 10000;
      font-weight: 500;
      font-size: 13px;
    }

    .toast.show {
      display: block;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .loading-spinner {
      display: inline-block;
      width: 14px;
      height: 14px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .empty-state {
      text-align: center;
      padding: 60px 30px;
    }

    .empty-icon {
      font-size: 64px;
      opacity: 0.2;
      margin-bottom: 20px;
    }

    .empty-text {
      font-size: 16px;
      color: #666;
      font-weight: 500;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 40px;
      max-width: 500px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid #f0f0f0;
    }

    .modal-title {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Sora', sans-serif;
    }

    .close-btn {
      background: #f5f5f5;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      color: #666;
      transition: all 0.2s;
      font-weight: bold;
    }

    .close-btn:hover {
      background: #e5e5e5;
      color: #f44336;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .about-content-wrapper {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      .about-text {
        padding-right: 0;
      }
    }

    @media (max-width: 768px) {
      .header-main, .header-top {
        padding: 12px 20px;
      }

      .search-container {
        order: 3;
        width: 100%;
      }

      .hero {
        padding: 40px 20px;
      }

      .hero-title {
        font-size: 28px;
      }

      .hero-subtitle {
        font-size: 14px;
      }

      .main-content {
        padding: 30px 20px;
      }

      .section-title {
        font-size: 22px;
      }

      .products-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .cart-item {
        flex-direction: column;
        align-items: stretch;
      }

      .auth-card {
        padding: 30px 24px;
      }

      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .contact-info-grid {
        grid-template-columns: 1fr;
      }

      .stats-container {
        grid-template-columns: 1fr;
      }
    }

    /* Offer Banner */
    .offer-banner {
      background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
      color: white;
      padding: 10px 40px;
      text-align: center;
      font-weight: 600;
      font-size: 12px;
    }

    /* Google Sheets Info Banner */
    .info-banner {
      background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
      color: white;
      padding: 16px 40px;
      text-align: center;
      font-size: 13px;
      line-height: 1.6;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .info-banner strong {
      font-weight: 700;
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="app-container"><!-- Header -->
   <header class="header">
    <div class="header-top">
     <div class="header-top-left">
      <div class="header-top-item"><span>üìû</span> <span>+91 98765 43210</span>
      </div>
      <div class="header-top-item"><span>üìß</span> <span>support@farm2home.com</span>
      </div>
     </div>
     <div class="header-top-item">
      ‚ú® Free Delivery on Orders Above ‚Çπ500
     </div>
    </div>
    <div class="header-main">
     <div class="logo" onclick="goHome()">
      <div class="logo-icon">
       F2H
      </div>
      <div class="logo-text">
       <div class="logo-title">
        Farm2Home
       </div>
       <div class="logo-subtitle">
        Fresh &amp; Organic
       </div>
      </div>
     </div>
     <div class="search-container"><input type="text" class="search-box" id="search-input" placeholder="Search for fresh vegetables, fruits, grains..."> <button class="search-btn" onclick="searchProducts()">üîç</button>
     </div>
     <div class="header-actions" id="header-actions"></div>
    </div>
   </header><!-- Hero Section -->
   <section class="hero" id="hero-section" style="display: none;">
    <div class="hero-content">
     <div class="hero-badge">
      üå± 100% Organic &amp; Fresh
     </div>
     <h1 class="hero-title">Farm Fresh Delivered to Your Doorstep</h1>
     <p class="hero-subtitle">Connect directly with local farmers for the freshest organic produce</p>
     <div class="hero-cta"><button class="hero-btn hero-btn-primary" onclick="scrollToProducts()">Start Shopping</button> <button class="hero-btn hero-btn-secondary" onclick="scrollToAbout()">Learn More</button>
     </div>
     <div class="hero-features">
      <div class="hero-feature">
       <div class="hero-feature-icon">
          
       </div><span>100% Organic</span>
      </div>
      <div class="hero-feature">
       <div class="hero-feature-icon">
        üöö
       </div><span>Fast Delivery</span>
      </div>
      <div class="hero-feature">
       <div class="hero-feature-icon">
        üåæ
       </div><span>Direct from Farmers</span>
      </div>
      <div class="hero-feature">
       <div class="hero-feature-icon">
        üíö
       </div><span>Safe &amp; Secure</span>
      </div>
     </div>
    </div>
   </section><!-- Stats Banner -->
   <section class="stats-banner" id="stats-banner" style="display: none;">
    <div class="stats-container">
     <div class="stat-item">
      <div class="stat-number" id="total-customers">
       0
      </div>
      <div class="stat-label">
       Happy Customers
      </div>
     </div>
     <div class="stat-item">
      <div class="stat-number" id="total-farmers">
       0
      </div>
      <div class="stat-label">
       Verified Farmers
      </div>
     </div>
     <div class="stat-item">
      <div class="stat-number" id="total-products">
       0
      </div>
      <div class="stat-label">
       Fresh Products
      </div>
     </div>
     <div class="stat-item">
      <div class="stat-number">
       100%
      </div>
      <div class="stat-label">
       Organic
      </div>
     </div>
    </div>
   </section><!-- Main Content -->
   <main class="main-content"><!-- Signup View -->
    <div id="signup-view" class="view active">
     <div class="auth-container">
      <div class="auth-card">
       <h1 class="auth-title">Join Farm2Home</h1>
       <p class="auth-subtitle">Create your account and start shopping fresh, organic produce directly from local farmers</p>
       <form id="signup-form" onsubmit="handleSignup(event)">
        <div class="form-group"><label class="form-label" for="signup-name">Full Name</label> <input type="text" id="signup-name" class="form-input" required placeholder="Enter your full name">
        </div>
        <div class="form-group"><label class="form-label" for="signup-email">Email Address</label> <input type="email" id="signup-email" class="form-input" required placeholder="your@email.com">
        </div>
        <div class="form-group"><label class="form-label" for="signup-password">Password</label> <input type="password" id="signup-password" class="form-input" required minlength="6" placeholder="Create a strong password">
        </div>
        <div class="form-group"><label class="form-label" for="signup-phone">Phone Number</label> <input type="tel" id="signup-phone" class="form-input" required placeholder="+91 98765 43210">
        </div>
        <div class="form-group"><label class="form-label" for="signup-role">I am a</label> <select id="signup-role" class="form-select" required onchange="toggleFarmerFields()"> <option value="">Select Role</option> <option value="customer">Customer - I want to buy fresh produce</option> <option value="farmer">Farmer - I want to sell my produce</option> </select>
        </div>
        <div id="farmer-fields" style="display: none;">
         <div class="form-group"><label class="form-label" for="signup-location">Farm Location</label> <input type="text" id="signup-location" class="form-input" placeholder="Enter your farm location">
         </div>
        </div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 12px; padding: 12px;">Create Account</button>
       </form>
       <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e5e5;">
        <p style="color: #666; font-size: 14px; margin-bottom: 12px;">Already have an account?</p><button class="btn btn-outline" onclick="showLoginView()" style="width: 100%; padding: 12px;">Login to Your Account</button>
       </div>
      </div>
     </div>
    </div><!-- Login View -->
    <div id="login-view" class="view">
     <div class="auth-container">
      <div class="auth-card">
       <h1 class="auth-title">Welcome Back</h1>
       <p class="auth-subtitle">Login to your Farm2Home account to continue shopping fresh produce</p>
       <form id="login-form" onsubmit="handleLogin(event)">
        <div class="form-group"><label class="form-label" for="login-email">Email Address</label> <input type="email" id="login-email" class="form-input" required placeholder="your@email.com">
        </div>
        <div class="form-group"><label class="form-label" for="login-password">Password</label> <input type="password" id="login-password" class="form-input" required placeholder="Enter your password">
        </div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 12px; padding: 12px;">Login</button>
       </form>
       <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e5e5;">
        <p style="color: #666; font-size: 14px; margin-bottom: 12px;">Don't have an account?</p><button class="btn btn-outline" onclick="showSignupView()" style="width: 100%; padding: 12px;">Create New Account</button>
       </div>
      </div>
     </div>
    </div><!-- Customer Shop View -->
    <div id="customer-view" class="view">
     <div class="section" id="products-section">
      <div class="section-header">
       <h2 class="section-title">Fresh Products</h2>
       <div class="category-filter" id="category-filter"></div>
      </div>
      <div class="products-grid" id="products-grid"></div>
     </div><!-- About Section -->
     <section class="about-section" id="about-section">
      <div class="about-content-wrapper">
       <div class="about-text">
        <h2 class="about-title">About Farm2Home</h2>
        <p class="about-description">Farm2Home is India's leading platform connecting farmers directly with customers. We ensure fresh, organic produce reaches your doorstep while supporting local farmers with fair prices and sustainable farming practices.</p>
       </div>
       <div class="contact-info-grid">
        <div class="contact-item">
         <div class="contact-icon">
          üìû
         </div>
         <div class="contact-label">
          Call Us
         </div>
         <div class="contact-value">
          +91 98765 43210
         </div>
        </div>
        <div class="contact-item">
         <div class="contact-icon">
          ‚úâÔ∏è
         </div>
         <div class="contact-label">
          Email
         </div>
         <div class="contact-value">
          support@farm2home.com
         </div>
        </div>
        <div class="contact-item">
         <div class="contact-icon">
          üïê
         </div>
         <div class="contact-label">
          Helpdesk
         </div>
         <div class="contact-value">
          Mon-Sat: 9 AM - 6 PM
         </div>
        </div>
       </div>
      </div>
     </section>
    </div><!-- Cart View -->
    <div id="cart-view" class="view">
     <div class="cart-container">
      <div class="section-header">
       <h2 class="section-title">Shopping Cart</h2>
      </div>
      <div id="cart-items"></div>
      <div class="cart-summary" id="cart-summary" style="display: none;">
       <div class="cart-total-row"><span class="cart-total-label">Subtotal</span> <span id="cart-subtotal" style="font-size: 16px; font-weight: 700;">‚Çπ0</span>
       </div>
       <div class="cart-total-row"><span class="cart-total-label">Delivery Charges</span> <span id="cart-delivery" style="font-size: 16px; font-weight: 700;">Free</span>
       </div>
       <div class="cart-total-row final"><span class="cart-total-label" style="font-size: 16px;">Total Amount</span> <span class="cart-total-amount" id="cart-total">‚Çπ0</span>
       </div><button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; margin-top: 20px; padding: 14px; font-size: 14px;"> Proceed to Checkout </button>
      </div>
     </div>
    </div><!-- Checkout View -->
    <div id="checkout-view" class="view">
     <div class="checkout-section">
      <h2 class="checkout-title">Delivery Details</h2>
      <form id="checkout-form" onsubmit="proceedToPayment(event)">
       <div class="form-group"><label class="form-label" for="delivery-name">Full Name</label> <input type="text" id="delivery-name" class="form-input" required placeholder="Enter your full name">
       </div>
       <div class="form-group"><label class="form-label" for="delivery-phone">Contact Number</label> <input type="tel" id="delivery-phone" class="form-input" required placeholder="+91 98765 43210">
       </div>
       <div class="form-group"><label class="form-label" for="delivery-address">Delivery Address</label> <textarea id="delivery-address" class="form-textarea" required placeholder="House No., Street, Area"></textarea>
       </div>
       <div class="form-group"><label class="form-label" for="delivery-landmark">Landmark (Optional)</label> <input type="text" id="delivery-landmark" class="form-input" placeholder="Near XYZ Mall, ABC Road">
       </div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 16px; padding: 14px; font-size: 14px;"> Continue to Payment </button>
      </form>
     </div>
    </div><!-- Payment View -->
    <div id="payment-view" class="view">
     <div class="checkout-section">
      <h2 class="checkout-title">Select Payment Method</h2>
      <div class="payment-methods">
       <div class="payment-method selected" onclick="selectPaymentMethod('cod')">
        <div class="payment-icon">
         üíµ
        </div>
        <div class="payment-label">
         Cash on Delivery
        </div>
       </div>
       <div class="payment-method" onclick="selectPaymentMethod('upi')">
        <div class="payment-icon">
         üì±
        </div>
        <div class="payment-label">
         UPI Payment
        </div>
       </div>
       <div class="payment-method" onclick="selectPaymentMethod('card')">
        <div class="payment-icon">
         üí≥
        </div>
        <div class="payment-label">
         Card Payment
        </div>
       </div>
      </div><button class="btn btn-primary" onclick="placeOrder()" style="width: 100%; margin-top: 30px; padding: 14px; font-size: 14px;"> Place Order </button>
     </div>
    </div><!-- Order Success View -->
    <div id="success-view" class="view">
     <div class="order-success">
      <div class="success-icon">
       ‚úì
      </div>
      <h1 class="success-title">Order Placed Successfully!</h1>
      <p class="success-message">Thank you for your order! Your fresh produce will be delivered soon.<br>
        Order ID: <strong id="order-id-display" style="color: #4caf50;"></strong></p><button class="btn btn-primary" onclick="continueShopping()" style="padding: 12px 36px; font-size: 14px;">Continue Shopping</button>
     </div>
    </div><!-- Farmer Dashboard View -->
    <div id="farmer-view" class="view">
     <div class="admin-card">
      <div class="admin-header">
       <h2 class="admin-title">Farmer Dashboard</h2><button class="btn btn-secondary" onclick="toggleAddProductForm()">+ Add New Product</button>
      </div>
      <div class="dashboard-grid">
       <div class="stat-card">
        <div class="stat-icon">
         üì¶
        </div>
        <div class="stat-value" id="farmer-total-products">
         0
        </div>
        <div class="stat-label">
         Total Products
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         ‚úì
        </div>
        <div class="stat-value" id="farmer-approved">
         0
        </div>
        <div class="stat-label">
         Approved
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         ‚è≥
        </div>
        <div class="stat-value" id="farmer-pending">
         0
        </div>
        <div class="stat-label">
         Pending Approval
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         üõí
        </div>
        <div class="stat-value" id="farmer-orders">
         0
        </div>
        <div class="stat-label">
         Orders Received
        </div>
       </div>
      </div>
     </div>
     <div class="admin-card" id="add-product-form" style="display: none;">
      <div class="modal-header">
       <h3 class="modal-title">Add New Product</h3><button class="close-btn" onclick="toggleAddProductForm()">√ó</button>
      </div>
      <form onsubmit="addProduct(event)">
       <div class="image-upload-container"><label class="form-label">Product Image</label>
        <div class="file-input-wrapper"><label class="file-input-label"> <span style="font-size: 18px;">üì∑</span> <span>Choose Product Image</span> <input type="file" class="file-input" id="product-image-file" accept="image/*" onchange="previewProductImage(event)"> </label>
        </div><img id="product-image-preview" class="image-preview" style="display: none;" alt="Preview">
       </div>
       <div class="form-group"><label class="form-label" for="product-name">Product Name</label> <input type="text" id="product-name" class="form-input" required placeholder="e.g., Fresh Tomatoes">
       </div>
       <div class="form-group"><label class="form-label" for="category">Category</label> <select id="category" class="form-select" required> <option value="">Select Category</option> <option value="Vegetables">Vegetables</option> <option value="Fruits">Fruits</option> <option value="Leafy Greens">Leafy Greens</option> <option value="Herbs">Herbs &amp; Spices</option> <option value="Grains">Grains &amp; Pulses</option> <option value="Dairy">Dairy Products</option> </select>
       </div>
       <div class="form-group"><label class="form-label" for="price">Price (‚Çπ)</label> <input type="number" id="price" class="form-input" step="0.01" required placeholder="50.00">
       </div>
       <div class="form-group"><label class="form-label" for="unit">Unit</label> <input type="text" id="unit" class="form-input" required placeholder="per kg">
       </div>
       <div class="form-group"><label class="form-label" for="quantity">Available Quantity</label> <input type="number" id="quantity" class="form-input" required placeholder="100">
       </div>
       <div class="form-group"><label class="form-label" for="description">Description</label> <textarea id="description" class="form-textarea" required placeholder="Describe your product, farming methods, quality, etc."></textarea>
       </div><button type="submit" class="btn btn-primary" style="width: 100%; padding: 12px;">Submit for Approval</button>
      </form>
     </div>
     <div class="admin-card">
      <h3 class="admin-title" style="font-size: 20px; margin-bottom: 20px;">My Products</h3>
      <div id="my-products-list"></div>
     </div>
     <div class="admin-card">
      <h3 class="admin-title" style="font-size: 20px; margin-bottom: 20px;">Orders Received</h3>
      <div id="farmer-orders-list"></div>
     </div>
    </div><!-- Admin Panel View -->
    <div id="admin-view" class="view">
     <div class="admin-card">
      <h2 class="admin-title">Admin Control Panel</h2>
      <div class="dashboard-grid">
       <div class="stat-card">
        <div class="stat-icon">
         üì¶
        </div>
        <div class="stat-value" id="admin-total-products">
         0
        </div>
        <div class="stat-label">
         Total Products
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         ‚è≥
        </div>
        <div class="stat-value" id="admin-pending">
         0
        </div>
        <div class="stat-label">
         Pending Approvals
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         üõí
        </div>
        <div class="stat-value" id="admin-orders">
         0
        </div>
        <div class="stat-label">
         Total Orders
        </div>
       </div>
       <div class="stat-card">
        <div class="stat-icon">
         üí∞
        </div>
        <div class="stat-value" id="admin-revenue">
         ‚Çπ0
        </div>
        <div class="stat-label">
         Total Revenue
        </div>
       </div>
      </div>
     </div><!-- Product Approvals -->
     <div class="admin-card">
      <h3 class="admin-title" style="font-size: 20px; margin-bottom: 20px;">Pending Product Approvals</h3>
      <div id="pending-products"></div>
     </div><!-- All Products -->
     <div class="admin-card">
      <h3 class="admin-title" style="font-size: 20px; margin-bottom: 20px;">All Products</h3>
      <div id="all-products"></div>
     </div><!-- Order Management -->
     <div class="admin-card">
      <h3 class="admin-title" style="font-size: 20px; margin-bottom: 20px;">Order Management</h3>
      <div id="admin-orders-list"></div>
     </div>
    </div>
   </main>
  </div><!-- Toast Notification -->
  <div class="toast" id="toast"></div><!-- Admin Login Modal -->
  <div class="modal" id="admin-login-modal">
   <div class="modal-content">
    <div class="modal-header">
     <h2 class="modal-title">Admin Login</h2><button class="close-btn" onclick="closeAdminModal()">√ó</button>
    </div>
    <form onsubmit="handleAdminLogin(event)">
     <div class="form-group"><label class="form-label" for="admin-username">Username</label> <input type="text" id="admin-username" class="form-input" required placeholder="admin">
     </div>
     <div class="form-group"><label class="form-label" for="admin-password">Password</label> <input type="password" id="admin-password" class="form-input" required placeholder="Enter admin password">
     </div><button type="submit" class="btn btn-primary" style="width: 100%; padding: 12px;">Login as Admin</button>
    </form>
   </div>
  </div>
  <script>
    // ============================================
    // GOOGLE SHEETS API CONFIGURATION
    // ============================================
    const API_URL = 'https://script.google.com/macros/s/AKfycbwkEt5-B2FAIz2YKw75v8mHuBT1XEbUoEUXQlL7MbSU_F6oJcXCX43tBXvK9f8tjHzvFw/exec';
    
    const CATEGORIES = ["All", "Vegetables", "Fruits", "Leafy Greens", "Herbs", "Grains", "Dairy"];
    
    let allData = { users: [], products: [], orders: [] };
    let currentUser = null;
    let cart = [];
    let currentView = 'signup';
    let selectedCategory = 'All';
    let selectedPayment = 'cod';
    let deliveryDetails = {};

    // ============================================
    // GOOGLE SHEETS API FUNCTIONS
    // ============================================
    
    async function apiCall(action, table, record = null, id = null) {
      try {
        const payload = { action, table, record, id };
        
        // For CREATE, UPDATE, DELETE operations
        if (action !== 'READ_ALL') {
          await fetch(API_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload)
          });
          
          // Wait for Google Sheets to process
          await new Promise(resolve => setTimeout(resolve, 2000));
          return { success: true };
        }
        
        // For READ_ALL operations
        const getResponse = await fetch(`${API_URL}?action=READ_ALL&table=${table}`);
        const result = await getResponse.json();
        return result;
        
      } catch (error) {
        console.error('API Error:', error);
        return { success: false, error: error.message };
      }
    }

    async function createRecord(record, table) {
      const result = await apiCall('CREATE', table, record);
      if (result.success) {
        await loadAllData(); // Reload data after creation
      }
      return result;
    }

    async function readAllRecords(table) {
      return await apiCall('READ_ALL', table);
    }

    async function updateRecord(record, table) {
      const result = await apiCall('UPDATE', table, record);
      if (result.success) {
        await loadAllData(); // Reload data after update
      }
      return result;
    }

    async function deleteRecord(id, table) {
      const result = await apiCall('DELETE', table, null, id);
      if (result.success) {
        await loadAllData(); // Reload data after deletion
      }
      return result;
    }

    async function loadAllData() {
      try {
        const [usersResult, productsResult, ordersResult] = await Promise.all([
          readAllRecords('Users'),
          readAllRecords('Products'),
          readAllRecords('Orders')
        ]);

        if (usersResult.success) allData.users = usersResult.data;
        if (productsResult.success) allData.products = productsResult.data;
        if (ordersResult.success) allData.orders = ordersResult.data;

        updateUI();
        updateStats();
      } catch (error) {
        console.error('Error loading data:', error);
      }
    }

    // ============================================
    // INITIALIZATION
    // ============================================
    
    async function init() {
      showToast('Loading data from Google Sheets...');
      await loadAllData();
      checkAutoLogin();
      updateCartCount();
      
      // Refresh data every 30 seconds
      setInterval(loadAllData, 30000);
    }

    function updateStats() {
      const customers = allData.users.filter(u => u.role === 'customer').length;
      const farmers = allData.users.filter(u => u.role === 'farmer').length;
      const products = allData.products.filter(p => p.approval_status === 'approved').length;

      const customerEl = document.getElementById('total-customers');
      const farmerEl = document.getElementById('total-farmers');
      const productEl = document.getElementById('total-products');

      if (customerEl) customerEl.textContent = customers;
      if (farmerEl) farmerEl.textContent = farmers;
      if (productEl) productEl.textContent = products;
    }

    function checkAutoLogin() {
      const savedUser = localStorage.getItem('farm2homeUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        updateHeaderActions();
        showHero();
        if (currentUser.role === 'customer') {
          switchView('customer');
        } else if (currentUser.role === 'farmer') {
          switchView('farmer');
        }
      }
    }

    function showHero() {
      document.getElementById('hero-section').style.display = 'block';
      document.getElementById('stats-banner').style.display = 'block';
    }

    function goHome() {
      if (currentUser) {
        if (currentUser.role === 'customer') {
          switchView('customer');
        } else if (currentUser.role === 'farmer') {
          switchView('farmer');
        } else if (currentUser.role === 'admin') {
          switchView('admin');
        }
      }
    }

    function scrollToProducts() {
      const section = document.getElementById('products-section');
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    }

    function scrollToAbout() {
      const section = document.getElementById('about-section');
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    }

    function updateHeaderActions() {
      const container = document.getElementById('header-actions');
      if (!currentUser) {
        container.innerHTML = '<button class="header-btn admin-btn" onclick="showAdminLoginModal()">Admin Access</button>';
        return;
      }

      if (currentUser.role === 'admin') {
        container.innerHTML = `
          <button class="header-btn" onclick="logout()">Logout</button>
        `;
      } else {
        const cartBadge = cart.length > 0 ? `<span class="cart-badge">${cart.length}</span>` : '';
        container.innerHTML = `
          ${currentUser.role === 'customer' ? `<button class="header-btn cart-btn" onclick="switchView('cart')">üõí Cart ${cartBadge}</button>` : ''}
          <button class="header-btn" onclick="logout()">Logout</button>
        `;
      }
    }

    function toggleFarmerFields() {
      const role = document.getElementById('signup-role').value;
      const farmerFields = document.getElementById('farmer-fields');
      const locationInput = document.getElementById('signup-location');
      
      if (role === 'farmer') {
        farmerFields.style.display = 'block';
        locationInput.required = true;
      } else {
        farmerFields.style.display = 'none';
        locationInput.required = false;
      }
    }

    async function handleSignup(event) {
      event.preventDefault();

      const button = event.target.querySelector('button[type="submit"]');
      button.disabled = true;
      button.innerHTML = '<span class="loading-spinner"></span> Creating Account...';

      const email = document.getElementById('signup-email').value;
      const existingUser = allData.users.find(user => user.email === email);
      
      if (existingUser) {
        showToast('Email already registered. Please use a different email.');
        button.disabled = false;
        button.textContent = 'Create Account';
        return;
      }

      const role = document.getElementById('signup-role').value;
      const userData = {
        id: 'USER' + Date.now(),
        type: 'user',
        email: email,
        password: document.getElementById('signup-password').value,
        role: role,
        full_name: document.getElementById('signup-name').value,
        phone: document.getElementById('signup-phone').value,
        location: role === 'farmer' ? document.getElementById('signup-location').value : '',
        verified: role === 'farmer' ? 'false' : 'true',
        created_at: new Date().toISOString()
      };

      const result = await createRecord(userData, 'Users');

      button.disabled = false;
      button.textContent = 'Create Account';

      if (result.success) {
        currentUser = userData;
        localStorage.setItem('farm2homeUser', JSON.stringify(userData));
        updateHeaderActions();
        showHero();
        if (role === 'customer') {
          switchView('customer');
        } else if (role === 'farmer') {
          switchView('farmer');
        }
        showToast(`Welcome to Farm2Home, ${userData.full_name}!`);
        document.getElementById('signup-form').reset();
      } else {
        showToast('Failed to create account. Please try again.');
      }
    }

    function showLoginView() {
      switchView('login');
    }

    function showSignupView() {
      switchView('signup');
    }

    async function handleLogin(event) {
      event.preventDefault();

      const button = event.target.querySelector('button[type="submit"]');
      button.disabled = true;
      button.innerHTML = '<span class="loading-spinner"></span> Logging in...';

      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;

      const user = allData.users.find(u => u.email === email && u.password === password);

      button.disabled = false;
      button.textContent = 'Login';

      if (user) {
        currentUser = user;
        localStorage.setItem('farm2homeUser', JSON.stringify(user));
        updateHeaderActions();
        showHero();
        
        if (user.role === 'customer') {
          switchView('customer');
        } else if (user.role === 'farmer') {
          switchView('farmer');
        }
        
        showToast(`Welcome back, ${user.full_name}!`);
        document.getElementById('login-form').reset();
      } else {
        showToast('Invalid email or password. Please try again.');
      }
    }

    function showAdminLoginModal() {
      document.getElementById('admin-login-modal').classList.add('show');
    }

    function closeAdminModal() {
      document.getElementById('admin-login-modal').classList.remove('show');
    }

    async function handleAdminLogin(event) {
      event.preventDefault();

      const username = document.getElementById('admin-username').value;
      const password = document.getElementById('admin-password').value;

      if (username === 'admin' && password === 'admin123') {
        currentUser = { 
          id: 'admin', 
          role: 'admin', 
          email: 'admin@farm2home.com', 
          full_name: 'Administrator' 
        };
        localStorage.setItem('farm2homeUser', JSON.stringify(currentUser));
        closeAdminModal();
        updateHeaderActions();
        showHero();
        switchView('admin');
        showToast('Welcome Admin!');
      } else {
        showToast('Invalid admin credentials');
      }
    }

    function logout() {
      currentUser = null;
      cart = [];
      localStorage.removeItem('farm2homeUser');
      updateHeaderActions();
      document.getElementById('hero-section').style.display = 'none';
      document.getElementById('stats-banner').style.display = 'none';
      switchView('signup');
      showToast('Logged out successfully');
    }

    function switchView(view) {
      currentView = view;
      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.getElementById(`${view}-view`).classList.add('active');

      updateUI();
    }

    function updateUI() {
      if (currentView === 'customer') {
        renderCategories();
        renderProducts();
      } else if (currentView === 'farmer') {
        renderFarmerDashboard();
      } else if (currentView === 'admin') {
        renderAdminPanel();
      } else if (currentView === 'cart') {
        renderCart();
      }
    }

    function renderCategories() {
      const container = document.getElementById('category-filter');
      container.innerHTML = CATEGORIES.map(cat => `
        <button class="category-chip ${cat === selectedCategory ? 'active' : ''}" onclick="selectCategory('${cat}')">
          ${cat}
        </button>
      `).join('');
    }

    function selectCategory(category) {
      selectedCategory = category;
      renderCategories();
      renderProducts();
    }

    function renderProducts() {
      const container = document.getElementById('products-grid');
      let products = allData.products.filter(p => p.approval_status === 'approved');
      
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      if (searchTerm) {
        products = products.filter(p => 
          p.product_name.toLowerCase().includes(searchTerm) || 
          p.description.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm)
        );
      }

      if (selectedCategory !== 'All') {
        products = products.filter(p => p.category === selectedCategory);
      }

      if (products.length === 0) {
        container.innerHTML = `
          <div class="empty-state" style="grid-column: 1 / -1;">
            <div class="empty-icon">üåæ</div>
            <div class="empty-text">No products found</div>
          </div>
        `;
        return;
      }

      container.innerHTML = products.map(product => {
        const farmer = allData.users.find(u => u.id === product.farmer_id);
        const verified = farmer && farmer.verified === 'true';
        
        return `
          <div class="product-card">
            <div class="product-image-container">
              ${product.image_url ? 
                `<img src="${product.image_url}" class="product-image" alt="${product.product_name}">` : 
                `<div class="product-image" style="display: flex; align-items: center; justify-content: center; font-size: 60px; color: #4caf50;">üåæ</div>`
              }
              ${verified ? '<div class="verified-badge">‚úì Verified</div>' : ''}
              <div class="product-badge">Fresh</div>
            </div>
            <div class="product-info">
              <div class="product-category">${product.category}</div>
              <h3 class="product-name">${product.product_name}</h3>
              <p class="product-description">${product.description}</p>
              <div class="farmer-info">
                <div class="farmer-name">üë®‚Äçüåæ ${product.farmer_name || 'Farm2Home'}</div>
                <div>üìç ${product.farmer_location || 'Multiple Locations'}</div>
              </div>
              <div class="product-footer">
                <div>
                  <div class="product-price">‚Çπ${product.price}</div>
                  <div class="product-unit">${product.unit}</div>
                </div>
                <div class="product-stock">${product.quantity} available</div>
              </div>
              ${currentUser && currentUser.role === 'customer' ? `
                <div class="product-actions">
                  <button class="btn btn-primary" onclick="addToCart('${product.id}')" style="flex: 1;">Add to Cart</button>
                  <button class="btn btn-secondary" onclick="buyNow('${product.id}')" style="flex: 1;">Buy Now</button>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }).join('');
    }

    function searchProducts() {
      renderProducts();
    }

    function addToCart(productId) {
      if (!currentUser || currentUser.role !== 'customer') {
        showToast('Please login as a customer to add items to cart');
        return;
      }

      const product = allData.products.find(p => p.id === productId);
      if (!product) return;

      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) {
        showToast('Product already in cart');
        return;
      }

      cart.push({ ...product, cart_quantity: 1 });
      updateCartCount();
      showToast('Added to cart!');
    }

    function buyNow(productId) {
      addToCart(productId);
      switchView('cart');
    }

    function updateCartCount() {
      updateHeaderActions();
    }

    function renderCart() {
      const container = document.getElementById('cart-items');
      const summary = document.getElementById('cart-summary');

      if (cart.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üõí</div>
            <div class="empty-text">Your cart is empty</div>
          </div>
        `;
        summary.style.display = 'none';
        return;
      }

      const total = cart.reduce((sum, item) => sum + (parseFloat(item.price) * (item.cart_quantity || 1)), 0);

      container.innerHTML = cart.map((item, index) => `
        <div class="cart-item">
          ${item.image_url ? 
            `<img src="${item.image_url}" class="cart-item-image" alt="${item.product_name}">` : 
            `<div class="cart-item-image" style="display: flex; align-items: center; justify-content: center; font-size: 40px; color: #4caf50;">üåæ</div>`
          }
          <div class="cart-item-info">
            <h3 class="cart-item-name">${item.product_name}</h3>
            <div class="cart-item-details">
              Farmer: ${item.farmer_name || 'Farm2Home'}<br>
              Location: ${item.farmer_location || 'Multiple Locations'}<br>
              Price: ‚Çπ${item.price} ${item.unit}
            </div>
          </div>
          <div class="cart-item-price">‚Çπ${item.price}</div>
          <button class="btn btn-danger" onclick="removeFromCart(${index})">Remove</button>
        </div>
      `).join('');

      document.getElementById('cart-subtotal').textContent = `‚Çπ${total.toFixed(2)}`;
      document.getElementById('cart-delivery').textContent = total > 500 ? 'Free' : '‚Çπ40';
      document.getElementById('cart-total').textContent = `‚Çπ${(total + (total > 500 ? 0 : 40)).toFixed(2)}`;
      summary.style.display = 'block';
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCartCount();
      renderCart();
      showToast('Item removed from cart');
    }

    function proceedToCheckout() {
      if (cart.length === 0) {
        showToast('Your cart is empty');
        return;
      }
      switchView('checkout');
    }

    function proceedToPayment(event) {
      event.preventDefault();

      deliveryDetails = {
        name: document.getElementById('delivery-name').value,
        phone: document.getElementById('delivery-phone').value,
        address: document.getElementById('delivery-address').value,
        landmark: document.getElementById('delivery-landmark').value
      };

      switchView('payment');
    }

    function selectPaymentMethod(method) {
      selectedPayment = method;
      document.querySelectorAll('.payment-method').forEach(pm => pm.classList.remove('selected'));
      event.target.closest('.payment-method').classList.add('selected');
    }

    async function placeOrder() {
      if (cart.length === 0) {
        showToast('Cart is empty');
        return;
      }

      const total = cart.reduce((sum, item) => sum + (parseFloat(item.price) * (item.cart_quantity || 1)), 0);
      const deliveryCharge = total > 500 ? 0 : 40;
      const orderId = 'ORD' + Date.now();

      const orderData = {
        id: orderId,
        type: 'order',
        order_id: orderId,
        customer_id: currentUser.id,
        customer_name: deliveryDetails.name,
        customer_phone: deliveryDetails.phone,
        customer_address: deliveryDetails.address,
        landmark: deliveryDetails.landmark,
        payment_method: selectedPayment,
        total_amount: total + deliveryCharge,
        items: JSON.stringify(cart.map(item => ({
          id: item.id,
          name: item.product_name,
          price: item.price,
          farmer_id: item.farmer_id,
          farmer_name: item.farmer_name
        }))),
        order_status: 'pending',
        order_date: new Date().toISOString()
      };

      const result = await createRecord(orderData, 'Orders');

      if (result.success) {
        document.getElementById('order-id-display').textContent = orderId;
        cart = [];
        updateCartCount();
        switchView('success');
        showToast('Order placed successfully! Farmer has been notified.');
      } else {
        showToast('Failed to place order. Please try again.');
      }
    }

    function continueShopping() {
      switchView('customer');
    }

    function toggleAddProductForm() {
      const form = document.getElementById('add-product-form');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
      
      if (form.style.display === 'block') {
        document.getElementById('product-image-preview').style.display = 'none';
        document.getElementById('product-image-file').value = '';
      }
    }

    function previewProductImage(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('product-image-preview');
          preview.src = e.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    }

    async function addProduct(event) {
      event.preventDefault();

      if (!currentUser || currentUser.role !== 'farmer') {
        showToast('Only farmers can add products');
        return;
      }

      const button = event.target.querySelector('button[type="submit"]');
      button.disabled = true;
      button.innerHTML = '<span class="loading-spinner"></span> Submitting...';

      const imageFile = document.getElementById('product-image-file').files[0];
      
      let imageUrl = '';
      if (imageFile) {
        const reader = new FileReader();
        imageUrl = await new Promise((resolve) => {
          reader.onload = function(e) {
            resolve(e.target.result);
          };
          reader.readAsDataURL(imageFile);
        });
      }

      const productData = {
        id: 'PROD' + Date.now(),
        type: 'product',
        product_name: document.getElementById('product-name').value,
        category: document.getElementById('category').value,
        price: parseFloat(document.getElementById('price').value),
        unit: document.getElementById('unit').value,
        quantity: parseInt(document.getElementById('quantity').value),
        farmer_id: currentUser.id,
        farmer_name: currentUser.full_name,
        farmer_location: currentUser.location,
        farmer_phone: currentUser.phone,
        description: document.getElementById('description').value,
        image_url: imageUrl,
        approval_status: 'pending',
        is_default: 'false',
        created_at: new Date().toISOString()
      };

      const result = await createRecord(productData, 'Products');

      button.disabled = false;
      button.textContent = 'Submit for Approval';

      if (result.success) {
        showToast('Product submitted for admin approval!');
        event.target.reset();
        document.getElementById('product-image-preview').style.display = 'none';
        toggleAddProductForm();
      } else {
        showToast('Failed to add product. Please try again.');
      }
    }

    function renderFarmerDashboard() {
      if (!currentUser || currentUser.role !== 'farmer') return;

      const myProducts = allData.products.filter(p => p.farmer_id === currentUser.id);
      const myOrders = allData.orders.filter(order => {
        try {
          const orderItems = JSON.parse(order.items);
          return orderItems.some(item => item.farmer_id === currentUser.id);
        } catch {
          return false;
        }
      });
      
      const approved = myProducts.filter(p => p.approval_status === 'approved').length;
      const pending = myProducts.filter(p => p.approval_status === 'pending').length;

      document.getElementById('farmer-total-products').textContent = myProducts.length;
      document.getElementById('farmer-approved').textContent = approved;
      document.getElementById('farmer-pending').textContent = pending;
      document.getElementById('farmer-orders').textContent = myOrders.length;

      const productsContainer = document.getElementById('my-products-list');
      if (myProducts.length === 0) {
        productsContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì¶</div>
            <div class="empty-text">No products yet. Add your first product!</div>
          </div>
        `;
      } else {
        productsContainer.innerHTML = myProducts.map(product => `
          <div class="product-list-item">
            <div class="product-list-header">
              <div>
                <h4 class="product-list-title">${product.product_name}</h4>
                <div class="product-list-details">
                  Category: ${product.category}<br>
                  Price: ‚Çπ${product.price} ${product.unit}<br>
                  Stock: ${product.quantity} available<br>
                  Description: ${product.description}
                </div>
              </div>
              <span class="status-badge status-${product.approval_status}">
                ${product.approval_status}
              </span>
            </div>
            <button class="btn btn-danger" onclick="deleteProduct('${product.id}')">Delete Product</button>
          </div>
        `).join('');
      }

      const ordersContainer = document.getElementById('farmer-orders-list');
      if (myOrders.length === 0) {
        ordersContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì¶</div>
            <div class="empty-text">No orders received yet</div>
          </div>
        `;
      } else {
        ordersContainer.innerHTML = myOrders.map(order => {
          try {
            const orderItems = JSON.parse(order.items);
            const myItems = orderItems.filter(item => item.farmer_id === currentUser.id);
            
            return `
              <div class="product-list-item">
                <div class="product-list-header">
                  <div>
                    <h4 class="product-list-title">Order #${order.order_id}</h4>
                    <div class="product-list-details">
                      Customer: ${order.customer_name}<br>
                      Phone: ${order.customer_phone}<br>
                      Address: ${order.customer_address}<br>
                      Items: ${myItems.map(item => item.name).join(', ')}<br>
                      Date: ${new Date(order.order_date).toLocaleDateString()}
                    </div>
                  </div>
                  <span class="status-badge status-${order.order_status}">
                    ${order.order_status}
                  </span>
                </div>
              </div>
            `;
          } catch {
            return '';
          }
        }).join('');
      }
    }

    async function deleteProduct(productId) {
      const result = await deleteRecord(productId, 'Products');
      if (result.success) {
        showToast('Product deleted successfully');
      } else {
        showToast('Failed to delete product');
      }
    }

    function renderAdminPanel() {
      const products = allData.products;
      const pendingProducts = products.filter(p => p.approval_status === 'pending');
      const orders = allData.orders;
      const totalRevenue = orders.reduce((sum, order) => sum + parseFloat(order.total_amount || 0), 0);

      document.getElementById('admin-total-products').textContent = products.length;
      document.getElementById('admin-pending').textContent = pendingProducts.length;
      document.getElementById('admin-orders').textContent = orders.length;
      document.getElementById('admin-revenue').textContent = `‚Çπ${totalRevenue.toFixed(2)}`;

      const pendingContainer = document.getElementById('pending-products');
      if (pendingProducts.length === 0) {
        pendingContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">‚úì</div>
            <div class="empty-text">No pending approvals</div>
          </div>
        `;
      } else {
        pendingContainer.innerHTML = pendingProducts.map(product => `
          <div class="product-list-item">
            <div class="product-list-header">
              <div>
                <h4 class="product-list-title">${product.product_name}</h4>
                <div class="product-list-details">
                  Category: ${product.category}<br>
                  Price: ‚Çπ${product.price} ${product.unit}<br>
                  Farmer: ${product.farmer_name} (${product.farmer_location})<br>
                  Stock: ${product.quantity} available<br>
                  Description: ${product.description}
                </div>
              </div>
            </div>
            <div class="admin-actions">
              <button class="btn btn-primary" onclick="approveProduct('${product.id}')">Approve</button>
              <button class="btn btn-danger" onclick="rejectProduct('${product.id}')">Reject</button>
            </div>
          </div>
        `).join('');
      }

      const allProductsContainer = document.getElementById('all-products');
      if (products.length === 0) {
        allProductsContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì¶</div>
            <div class="empty-text">No products yet</div>
          </div>
        `;
      } else {
        allProductsContainer.innerHTML = products.map(product => `
          <div class="product-list-item">
            <div class="product-list-header">
              <div>
                <h4 class="product-list-title">${product.product_name}</h4>
                <div class="product-list-details">
                  Category: ${product.category}<br>
                  Price: ‚Çπ${product.price} ${product.unit}<br>
                  Farmer: ${product.farmer_name}<br>
                  Stock: ${product.quantity} available
                </div>
              </div>
              <span class="status-badge status-${product.approval_status}">
                ${product.approval_status}
              </span>
            </div>
            <button class="btn btn-danger" onclick="deleteProductAdmin('${product.id}')">Delete</button>
          </div>
        `).join('');
      }

      const ordersContainer = document.getElementById('admin-orders-list');
      if (orders.length === 0) {
        ordersContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì¶</div>
            <div class="empty-text">No orders yet</div>
          </div>
        `;
      } else {
        ordersContainer.innerHTML = orders.map(order => {
          try {
            const items = JSON.parse(order.items);
            return `
              <div class="product-list-item">
                <div class="product-list-header">
                  <div>
                    <h4 class="product-list-title">Order #${order.order_id}</h4>
                    <div class="product-list-details">
                      Customer: ${order.customer_name}<br>
                      Phone: ${order.customer_phone}<br>
                      Address: ${order.customer_address}<br>
                      Payment: ${order.payment_method.toUpperCase()}<br>
                      Total: ‚Çπ${parseFloat(order.total_amount).toFixed(2)}<br>
                      Date: ${new Date(order.order_date).toLocaleDateString()}<br>
                      Items: ${items.map(item => `${item.name} (‚Çπ${item.price})`).join(', ')}
                    </div>
                  </div>
                  <span class="status-badge status-${order.order_status}">
                    ${order.order_status}
                  </span>
                </div>
                <div class="admin-actions">
                  <select class="form-select" style="width: auto; padding: 8px 16px; border-radius: 8px;" onchange="updateOrderStatus('${order.id}', this.value)">
                    <option value="pending" ${order.order_status === 'pending' ? 'selected' : ''}>Pending</option>
                    <option value="processing" ${order.order_status === 'processing' ? 'selected' : ''}>Processing</option>
                    <option value="shipped" ${order.order_status === 'shipped' ? 'selected' : ''}>Shipped</option>
                    <option value="delivered" ${order.order_status === 'delivered' ? 'selected' : ''}>Delivered</option>
                    <option value="cancelled" ${order.order_status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
                  </select>
                </div>
              </div>
            `;
          } catch {
            return '';
          }
        }).join('');
      }
    }

    async function approveProduct(productId) {
      const product = allData.products.find(p => p.id === productId);
      if (!product) return;

      product.approval_status = 'approved';
      const result = await updateRecord(product, 'Products');
      if (result.success) {
        showToast('Product approved! Refreshing data...');
        
        // Force multiple reloads to ensure data sync
        await loadAllData();
        setTimeout(async () => {
          await loadAllData();
          showToast('Product now visible to customers!');
        }, 2000);
        setTimeout(async () => {
          await loadAllData();
        }, 4000);
      } else {
        showToast('Failed to approve product');
      }
    }

    async function rejectProduct(productId) {
      const product = allData.products.find(p => p.id === productId);
      if (!product) return;

      product.approval_status = 'rejected';
      const result = await updateRecord(product, 'Products');
      if (result.success) {
        showToast('Product rejected');
      } else {
        showToast('Failed to reject product');
      }
    }

    async function deleteProductAdmin(productId) {
      const result = await deleteRecord(productId, 'Products');
      if (result.success) {
        showToast('Product deleted successfully');
      } else {
        showToast('Failed to delete product');
      }
    }

    async function updateOrderStatus(orderId, newStatus) {
      const order = allData.orders.find(o => o.id === orderId);
      if (!order) return;

      order.order_status = newStatus;
      const result = await updateRecord(order, 'Orders');
      if (result.success) {
        showToast('Order status updated successfully!');
      } else {
        showToast('Failed to update order status');
      }
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Start the application
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a21a111956c46ef',t:'MTc2Mzc0MzIzMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>